<!doctype html><html lang=en dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Time Travel in Azure SQL Database |</title><meta name=keywords content="Azure SQL,SQL Server,Temporal Tables,Auditing"><meta name=description content="In our Invisible City subway system, we’ve talked about the &ldquo;Time Machine&rdquo; features in Delta Lake for big data. But what if your main terminal is built on a traditional, reliable foundation like Azure SQL Database?
Usually, a database has short-term memory. If a passenger changes their destination from &ldquo;Station A&rdquo; to &ldquo;Station B,&rdquo; the database overwrites the old entry. Station A is gone forever.
But sometimes, Conductor Mickey needs to know exactly what the city looked like last Tuesday at 2:00 PM. To do that without a magic wand, he uses Temporal Tables."><meta name=author content><link rel=canonical href=https://datasubway.dev/posts/temporal-tables-shadow-station/><link crossorigin=anonymous href=/assets/css/stylesheet.da3211e5ef867bf2b75fd5a6515cfed7195c011e8ab735694e203810a827097b.css integrity="sha256-2jIR5e+Ge/K3X9WmUVz+1xlcAR6KtzVpTiA4EKgnCXs=" rel="preload stylesheet" as=style><link rel=icon href=https://datasubway.dev/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://datasubway.dev/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://datasubway.dev/favicon-32x32.png><link rel=apple-touch-icon href=https://datasubway.dev/apple-touch-icon.png><link rel=mask-icon href=https://datasubway.dev/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://datasubway.dev/posts/temporal-tables-shadow-station/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><meta property="og:url" content="https://datasubway.dev/posts/temporal-tables-shadow-station/"><meta property="og:title" content="Time Travel in Azure SQL Database"><meta property="og:description" content="In our Invisible City subway system, we’ve talked about the “Time Machine” features in Delta Lake for big data. But what if your main terminal is built on a traditional, reliable foundation like Azure SQL Database?
Usually, a database has short-term memory. If a passenger changes their destination from “Station A” to “Station B,” the database overwrites the old entry. Station A is gone forever.
But sometimes, Conductor Mickey needs to know exactly what the city looked like last Tuesday at 2:00 PM. To do that without a magic wand, he uses Temporal Tables."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2026-02-08T00:00:00+00:00"><meta property="article:modified_time" content="2026-02-08T00:00:00+00:00"><meta property="article:tag" content="Azure SQL"><meta property="article:tag" content="SQL Server"><meta property="article:tag" content="Temporal Tables"><meta property="article:tag" content="Auditing"><meta name=twitter:card content="summary"><meta name=twitter:title content="Time Travel in Azure SQL Database"><meta name=twitter:description content="In our Invisible City subway system, we’ve talked about the &ldquo;Time Machine&rdquo; features in Delta Lake for big data. But what if your main terminal is built on a traditional, reliable foundation like Azure SQL Database?
Usually, a database has short-term memory. If a passenger changes their destination from &ldquo;Station A&rdquo; to &ldquo;Station B,&rdquo; the database overwrites the old entry. Station A is gone forever.
But sometimes, Conductor Mickey needs to know exactly what the city looked like last Tuesday at 2:00 PM. To do that without a magic wand, he uses Temporal Tables."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://datasubway.dev/posts/"},{"@type":"ListItem","position":2,"name":"Time Travel in Azure SQL Database","item":"https://datasubway.dev/posts/temporal-tables-shadow-station/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Time Travel in Azure SQL Database","name":"Time Travel in Azure SQL Database","description":"In our Invisible City subway system, we’ve talked about the \u0026ldquo;Time Machine\u0026rdquo; features in Delta Lake for big data. But what if your main terminal is built on a traditional, reliable foundation like Azure SQL Database?\nUsually, a database has short-term memory. If a passenger changes their destination from \u0026ldquo;Station A\u0026rdquo; to \u0026ldquo;Station B,\u0026rdquo; the database overwrites the old entry. Station A is gone forever.\nBut sometimes, Conductor Mickey needs to know exactly what the city looked like last Tuesday at 2:00 PM. To do that without a magic wand, he uses Temporal Tables.\n","keywords":["Azure SQL","SQL Server","Temporal Tables","Auditing"],"articleBody":"In our Invisible City subway system, we’ve talked about the “Time Machine” features in Delta Lake for big data. But what if your main terminal is built on a traditional, reliable foundation like Azure SQL Database?\nUsually, a database has short-term memory. If a passenger changes their destination from “Station A” to “Station B,” the database overwrites the old entry. Station A is gone forever.\nBut sometimes, Conductor Mickey needs to know exactly what the city looked like last Tuesday at 2:00 PM. To do that without a magic wand, he uses Temporal Tables.\n1. The Anatomy: The Station and its Shadow A Temporal Table (also known as a system-versioned table) isn’t just one table; it’s a “Twin Station” setup that acts like a security camera recording every change.\nThe Current Table: This is the station everyone sees. It shows the data as it is right now. The History Table: This is a hidden “shadow” station. Every time a row in the Current Table is updated or deleted, the old version is automatically moved into this archive. The Clocks (Period Columns): Two hidden columns (ValidFrom and ValidTo) that mark exactly when a record was active. 2. The Operations: How the “Black Box” Works When Mickey manages a Temporal Table, Azure SQL does all the heavy lifting in the background. Here is the logbook of how passengers (data rows) move between the stations.\nA. The Setup (Building the Station) To turn a regular station into a Temporal Station, we add the “Clocks” and link it to a history table in the blueprint:\nCREATE TABLE SubwayStations ( StationID int NOT NULL PRIMARY KEY CLUSTERED, StationName nvarchar(50) NOT NULL, Capacity int NOT NULL, -- The two 'Clocks' start here ValidFrom datetime2 (2) GENERATED ALWAYS AS ROW START, ValidTo datetime2 (2) GENERATED ALWAYS AS ROW END, PERIOD FOR SYSTEM_TIME (ValidFrom, ValidTo) ) WITH (SYSTEM_VERSIONING = ON (HISTORY_TABLE = dbo.SubwayStationsHistory)); B. The INSERT (A New Passenger Arrives) When you add data, it only goes into the Current Table. Azure SQL automatically sets the ValidFrom time to “Now” and the ValidTo time to the “End of Time” (9999-12-31).\nINSERT INTO SubwayStations (StationID, StationName, Capacity) VALUES (101, 'Mickey Central', 500); Result: ‘Mickey Central’ is in the Current table. The History table remains empty.\nC. The UPDATE (Changing Seats) This is where the magic happens. Mickey needs to change the capacity of the station from 500 to 800. Azure SQL intercepts this change:\nIt takes the Old Record (Capacity 500) and moves it to the History Table, stamping it with the exact time it “died.” It puts the New Record (Capacity 800) into the Current Table, stamping it with the new start time. UPDATE SubwayStations SET Capacity = 800 WHERE StationID = 101; D. The DELETE (Closing the Station) If Mickey closes a station, it disappears from the “Current” view entirely, but the complete final record is saved in the History Archive forever.\n3. Time Travel: Querying the Past The whole reason we build these “Shadow Stations” is so we can travel back in time easily. You don’t need to restore old backups; you just use a special SQL phrase: FOR SYSTEM_TIME.\nThe “AS OF” Query (The Snapshot) Imagine it is Friday, but the City Mayor wants to know the station capacity from last Tuesday at 2:00 PM.\nSELECT * FROM SubwayStations FOR SYSTEM_TIME AS OF '2026-01-13 14:00:00' WHERE StationID = 101; How it works: Azure SQL automatically looks at both the Current and History tables, finds the one record where Tuesday 2:00 PM falls between the start and end times, and serves it to you.\nThe “Time Range” Query (The Life Story) Sometimes you want to see every change that ever happened to a station.\nSELECT * FROM SubwayStations FOR SYSTEM_TIME FROM '2026-01-01' TO '2026-02-01' WHERE StationID = 101 ORDER BY ValidFrom; This returns a list of every version of Station 101 that existed during that month. It’s like watching a time-lapse video of the data changing.\nConclusion: Trust, but Verify In the Invisible City, data is constantly changing. Mistakes happen. Someone runs an UPDATE without a WHERE clause, or a bug corrupts a price list.With Temporal Tables, Mickey never has to panic. He has a built-in security camera that lets him answer the ultimate question: “What did we know, and exactly when did we know it?”\n","wordCount":"720","inLanguage":"en","datePublished":"2026-02-08T00:00:00Z","dateModified":"2026-02-08T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://datasubway.dev/posts/temporal-tables-shadow-station/"},"publisher":{"@type":"Organization","name":"","logo":{"@type":"ImageObject","url":"https://datasubway.dev/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://datasubway.dev/about/ title="About Me"><span>About Me</span></a></li><li><a href=https://datasubway.dev/posts/ title=Blog><span>Blog</span></a></li><li><a href=https://datasubway.dev/categories/ title=Categories><span>Categories</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Time Travel in Azure SQL Database</h1><div class=post-meta><span title='2026-02-08 00:00:00 +0000 UTC'>February 8, 2026</span></div></header><div class=post-content><p>In our <strong>Invisible City</strong> subway system, we’ve talked about the &ldquo;Time Machine&rdquo; features in Delta Lake for big data. But what if your main terminal is built on a traditional, reliable foundation like <strong>Azure SQL Database</strong>?</p><p>Usually, a database has short-term memory. If a passenger changes their destination from &ldquo;Station A&rdquo; to &ldquo;Station B,&rdquo; the database overwrites the old entry. Station A is gone forever.</p><p>But sometimes, <strong>Conductor Mickey</strong> needs to know exactly what the city looked like last Tuesday at 2:00 PM. To do that without a magic wand, he uses <strong>Temporal Tables</strong>.</p><hr><h2 id=1-the-anatomy-the-station-and-its-shadow>1. The Anatomy: The Station and its Shadow<a hidden class=anchor aria-hidden=true href=#1-the-anatomy-the-station-and-its-shadow>#</a></h2><p>A Temporal Table (also known as a system-versioned table) isn&rsquo;t just one table; it&rsquo;s a &ldquo;Twin Station&rdquo; setup that acts like a security camera recording every change.</p><ul><li><strong>The Current Table:</strong> This is the station everyone sees. It shows the data as it is <strong>right now</strong>.</li><li><strong>The History Table:</strong> This is a hidden &ldquo;shadow&rdquo; station. Every time a row in the Current Table is updated or deleted, the old version is automatically moved into this archive.</li><li><strong>The Clocks (Period Columns):</strong> Two hidden columns (<code>ValidFrom</code> and <code>ValidTo</code>) that mark exactly when a record was active.</li></ul><p><img alt=Anotomy loading=lazy src=/images/post-6-im-1.png></p><hr><h2 id=2-the-operations-how-the-black-box-works>2. The Operations: How the &ldquo;Black Box&rdquo; Works<a hidden class=anchor aria-hidden=true href=#2-the-operations-how-the-black-box-works>#</a></h2><p>When Mickey manages a Temporal Table, Azure SQL does all the heavy lifting in the background.
Here is the logbook of how passengers (data rows) move between the stations.</p><h3 id=a-the-setup-building-the-station>A. The Setup (Building the Station)<a hidden class=anchor aria-hidden=true href=#a-the-setup-building-the-station>#</a></h3><p>To turn a regular station into a Temporal Station, we add the &ldquo;Clocks&rdquo; and link it to a history table in the blueprint:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> SubwayStations   
</span></span><span style=display:flex><span>(    
</span></span><span style=display:flex><span>    StationID int <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span> CLUSTERED,   
</span></span><span style=display:flex><span>    StationName nvarchar(<span style=color:#ae81ff>50</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>,  
</span></span><span style=display:flex><span>    Capacity int <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>,
</span></span><span style=display:flex><span>    <span style=color:#75715e>-- The two &#39;Clocks&#39; start here
</span></span></span><span style=display:flex><span>    ValidFrom datetime2 (<span style=color:#ae81ff>2</span>) <span style=color:#66d9ef>GENERATED</span> ALWAYS <span style=color:#66d9ef>AS</span> <span style=color:#66d9ef>ROW</span> <span style=color:#66d9ef>START</span>,  
</span></span><span style=display:flex><span>    ValidTo datetime2 (<span style=color:#ae81ff>2</span>) <span style=color:#66d9ef>GENERATED</span> ALWAYS <span style=color:#66d9ef>AS</span> <span style=color:#66d9ef>ROW</span> <span style=color:#66d9ef>END</span>,  
</span></span><span style=display:flex><span>    PERIOD <span style=color:#66d9ef>FOR</span> SYSTEM_TIME (ValidFrom, ValidTo)  
</span></span><span style=display:flex><span>)    
</span></span><span style=display:flex><span><span style=color:#66d9ef>WITH</span> (SYSTEM_VERSIONING <span style=color:#f92672>=</span> <span style=color:#66d9ef>ON</span> (HISTORY_TABLE <span style=color:#f92672>=</span> dbo.SubwayStationsHistory));
</span></span></code></pre></div><h3 id=b-the-insert-a-new-passenger-arrives>B. The INSERT (A New Passenger Arrives)<a hidden class=anchor aria-hidden=true href=#b-the-insert-a-new-passenger-arrives>#</a></h3><p>When you add data, it only goes into the Current Table. Azure SQL automatically sets the ValidFrom time to &ldquo;Now&rdquo; and the ValidTo time to the &ldquo;End of Time&rdquo; (9999-12-31).</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> SubwayStations (StationID, StationName, Capacity)
</span></span><span style=display:flex><span><span style=color:#66d9ef>VALUES</span> (<span style=color:#ae81ff>101</span>, <span style=color:#e6db74>&#39;Mickey Central&#39;</span>, <span style=color:#ae81ff>500</span>);
</span></span></code></pre></div><p><strong>Result:</strong> &lsquo;Mickey Central&rsquo; is in the Current table. The History table remains empty.</p><h3 id=c-the-update-changing-seats>C. The UPDATE (Changing Seats)<a hidden class=anchor aria-hidden=true href=#c-the-update-changing-seats>#</a></h3><p>This is where the magic happens. Mickey needs to change the capacity of the station from 500 to 800. Azure SQL intercepts this change:</p><ul><li><ol><li>It takes the <strong>Old Record</strong> (Capacity 500) and moves it to the <strong>History Table</strong>, stamping it with the exact time it &ldquo;died.&rdquo;</li></ol></li><li><ol start=2><li>It puts the <strong>New Record</strong> (Capacity 800) into the <strong>Current Table</strong>, stamping it with the new start time.</li></ol></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>UPDATE</span> SubwayStations 
</span></span><span style=display:flex><span><span style=color:#66d9ef>SET</span> Capacity <span style=color:#f92672>=</span> <span style=color:#ae81ff>800</span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span> StationID <span style=color:#f92672>=</span> <span style=color:#ae81ff>101</span>;
</span></span></code></pre></div><p><img alt=Update loading=lazy src=/images/post-6-im-2.png></p><h3 id=d-the-delete-closing-the-station>D. The DELETE (Closing the Station)<a hidden class=anchor aria-hidden=true href=#d-the-delete-closing-the-station>#</a></h3><p>If Mickey closes a station, it disappears from the &ldquo;Current&rdquo; view entirely, but the complete final record is saved in the History Archive forever.</p><hr><h2 id=3-time-travel-querying-the-past>3. Time Travel: Querying the Past<a hidden class=anchor aria-hidden=true href=#3-time-travel-querying-the-past>#</a></h2><p>The whole reason we build these &ldquo;Shadow Stations&rdquo; is so we can travel back in time easily. You don&rsquo;t need to restore old backups; you just use a special SQL phrase: <code>FOR SYSTEM_TIME</code>.</p><h3 id=the-as-of-query-the-snapshot>The &ldquo;AS OF&rdquo; Query (The Snapshot)<a hidden class=anchor aria-hidden=true href=#the-as-of-query-the-snapshot>#</a></h3><p>Imagine it is Friday, but the City Mayor wants to know the station capacity from <strong>last Tuesday at 2:00 PM</strong>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> SubwayStations
</span></span><span style=display:flex><span><span style=color:#66d9ef>FOR</span> SYSTEM_TIME <span style=color:#66d9ef>AS</span> <span style=color:#66d9ef>OF</span> <span style=color:#e6db74>&#39;2026-01-13 14:00:00&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span> StationID <span style=color:#f92672>=</span> <span style=color:#ae81ff>101</span>;
</span></span></code></pre></div><p><strong>How it works</strong>: Azure SQL automatically looks at both the Current and History tables, finds the one record where Tuesday 2:00 PM falls between the start and end times, and serves it to you.</p><h3 id=the-time-range-query-the-life-story>The &ldquo;Time Range&rdquo; Query (The Life Story)<a hidden class=anchor aria-hidden=true href=#the-time-range-query-the-life-story>#</a></h3><p>Sometimes you want to see every change that ever happened to a station.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> SubwayStations
</span></span><span style=display:flex><span><span style=color:#66d9ef>FOR</span> SYSTEM_TIME <span style=color:#66d9ef>FROM</span> <span style=color:#e6db74>&#39;2026-01-01&#39;</span> <span style=color:#66d9ef>TO</span> <span style=color:#e6db74>&#39;2026-02-01&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span> StationID <span style=color:#f92672>=</span> <span style=color:#ae81ff>101</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> ValidFrom;
</span></span></code></pre></div><p>This returns a list of every version of Station 101 that existed during that month.
It’s like watching a time-lapse video of the data changing.</p><p><img alt=Final loading=lazy src=/images/post-6-im-3.png></p><hr><h2 id=conclusion-trust-but-verify>Conclusion: Trust, but Verify<a hidden class=anchor aria-hidden=true href=#conclusion-trust-but-verify>#</a></h2><p>In the Invisible City, data is constantly changing. Mistakes happen. Someone runs an UPDATE without a WHERE clause, or a bug corrupts a price list.With Temporal Tables, Mickey never has to panic. He has a built-in security camera that lets him answer the ultimate question: &ldquo;What did we know, and exactly when did we know it?&rdquo;</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://datasubway.dev/tags/azure-sql/>Azure SQL</a></li><li><a href=https://datasubway.dev/tags/sql-server/>SQL Server</a></li><li><a href=https://datasubway.dev/tags/temporal-tables/>Temporal Tables</a></li><li><a href=https://datasubway.dev/tags/auditing/>Auditing</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2026 <a href=https://datasubway.dev/></a></span>·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script></body></html>